# 01. 集中式仓库管理和分布式仓库管理

## 1.1 版本控制系统概述

版本控制系统（Version Control System, VCS）是一种记录文件内容变化，以便将来查阅特定版本修订情况的系统。它可以帮助开发者追踪项目的历史，协作开发，以及在需要时回退到之前的版本。

### 版本控制系统的主要功能
- 记录文件的所有修改历史
- 支持多人协作开发
- 可以回退到任意历史版本
- 可以比较不同版本之间的差异
- 解决多人开发时的代码冲突

## 1.2 集中式版本控制系统（CVCS）

### 1.2.1 什么是集中式版本控制

集中式版本控制系统（Centralized Version Control Systems，简称 CVCS）是指版本库集中存放在中央服务器的版本控制系统。

### 1.2.2 工作原理

```
中央服务器（版本库）
        ↑↓
    ┌───┼───┐
    ↓   ↓   ↓
  客户端A 客户端B 客户端C
```

- **唯一的版本库**：所有的版本数据都保存在中央服务器上
- **签出-修改-提交**：开发者从中央服务器检出（checkout）代码，修改后再提交（commit）回中央服务器
- **依赖网络**：所有的版本控制操作都需要连接到中央服务器

### 1.2.3 典型代表

- **CVS** (Concurrent Versions System)
- **SVN** (Subversion)
- **Perforce**

### 1.2.4 优点

1. **易于管理**：管理员可以轻松掌控每个开发者的权限
2. **简单直观**：概念简单，容易理解和上手
3. **节省本地空间**：本地不需要保存完整的版本历史

### 1.2.5 缺点

1. **单点故障**：中央服务器出现故障，所有人都无法工作
2. **依赖网络**：必须联网才能进行版本控制操作
3. **性能问题**：所有操作都需要与服务器通信，速度较慢
4. **数据安全**：如果中央服务器的磁盘损坏，可能导致所有历史数据丢失

## 1.3 分布式版本控制系统（DVCS）

### 1.3.1 什么是分布式版本控制

分布式版本控制系统（Distributed Version Control System，简称 DVCS）是指每个开发者的本地都有一个完整的版本库。

### 1.3.2 工作原理

```
远程仓库（GitHub/GitLab等）
        ↑↓
    ┌───┼───┐
    ↓   ↓   ↓
本地仓库A 本地仓库B 本地仓库C
（完整版本库）（完整版本库）（完整版本库）
```

- **完整的版本库**：每个开发者本地都有完整的版本历史
- **本地提交**：大部分操作都在本地完成，不需要网络
- **推送和拉取**：通过 push 和 pull 与远程仓库同步

### 1.3.3 典型代表

- **Git**
- **Mercurial**
- **Bazaar**

### 1.3.4 优点

1. **离线工作**：可以在本地进行提交、查看历史等操作，不需要网络
2. **速度快**：大部分操作在本地完成，速度非常快
3. **更好的分支支持**：分支和合并操作更加灵活和强大
4. **数据安全**：每个开发者本地都有完整的版本历史，相当于天然的备份
5. **灵活的协作方式**：支持多种工作流程

### 1.3.5 缺点

1. **学习曲线陡峭**：概念较多，初学者需要时间理解
2. **占用空间大**：本地需要存储完整的版本历史
3. **权限管理复杂**：没有中央服务器那样集中的权限控制

## 1.4 集中式 vs 分布式对比

| 特性 | 集中式（SVN） | 分布式（Git） |
|------|--------------|--------------|
| 版本库位置 | 仅在中央服务器 | 每个开发者都有完整版本库 |
| 网络依赖 | 强依赖网络 | 可离线工作 |
| 提交速度 | 较慢（需要网络） | 很快（本地操作） |
| 分支管理 | 困难，成本高 | 简单，成本低 |
| 数据安全 | 中央服务器故障风险大 | 多点备份，更安全 |
| 权限控制 | 集中管理，简单 | 相对复杂 |
| 学习难度 | 简单 | 相对复杂 |
| 磁盘空间 | 占用少 | 占用多 |

## 1.5 为什么选择 Git

### 1.5.1 Git 的优势

1. **速度快**：大部分操作都在本地完成
2. **分支管理强大**：创建、切换、合并分支非常快速和简单
3. **完整性好**：Git 中所有数据在存储前都计算校验和，保证数据完整性
4. **支持非线性开发**：支持快速分支和合并，适合多人并行开发
5. **社区活跃**：GitHub、GitLab 等平台提供了强大的协作功能
6. **分布式架构**：每个开发者都有完整的版本历史

### 1.5.2 Git 的应用场景

- 开源项目协作（如 GitHub 上的开源项目）
- 企业内部代码管理
- 个人项目版本控制
- 文档管理和版本追踪
- 配置文件管理

## 1.6 Git 的基本概念

### 1.6.1 三个区域

1. **工作区（Working Directory）**：实际编辑文件的地方
2. **暂存区（Staging Area/Index）**：临时存放即将提交的修改
3. **版本库（Repository）**：存储所有版本历史的地方

### 1.6.2 基本工作流程

```
工作区 → (git add) → 暂存区 → (git commit) → 本地仓库 → (git push) → 远程仓库
```

## 1.7 总结

- **集中式版本控制系统**以中央服务器为核心，简单但依赖网络
- **分布式版本控制系统**每个开发者都有完整版本库，更灵活强大
- **Git** 是目前最流行的分布式版本控制系统
- 理解版本控制系统的原理对学习 Git 至关重要

---

**下一章节**：[02. Git客户端环境搭建](./02-git客户端环境搭建.md)
