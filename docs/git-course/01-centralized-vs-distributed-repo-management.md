# 01. 集中式仓库管理和分布式仓库管理

## 目录
- [版本控制系统概述](#版本控制系统概述)
- [集中式版本控制系统（CVCS）](#集中式版本控制系统cvcs)
- [分布式版本控制系统（DVCS）](#分布式版本控制系统dvcs)
- [两种模式的对比](#两种模式的对比)
- [为什么选择Git](#为什么选择git)

## 版本控制系统概述

版本控制系统（Version Control System，VCS）是一种记录文件内容变化，以便将来查阅特定版本修订情况的系统。它可以帮助开发者：

- 追踪项目历史
- 协作开发
- 回退到之前的版本
- 了解代码变更的原因和时间
- 并行开发多个功能

## 集中式版本控制系统（CVCS）

### 什么是集中式版本控制

集中式版本控制系统（Centralized Version Control Systems，简称 CVCS）采用客户端-服务器架构，所有的版本数据都保存在中央服务器上。

### 典型代表

- **SVN** (Subversion)
- **CVS** (Concurrent Versions System)
- **Perforce**

### 工作原理

```
中央服务器（唯一的版本库）
    ↓     ↓     ↓
客户端A  客户端B  客户端C
```

1. 开发者从中央服务器检出（checkout）代码
2. 在本地进行修改
3. 将修改提交（commit）回中央服务器
4. 其他开发者更新（update）获取最新代码

### 优点

✅ **概念简单**：易于理解和管理，学习曲线平缓  
✅ **权限控制**：可以精细控制每个目录的访问权限  
✅ **统一管理**：管理员可以轻松掌控每个开发者的权限  
✅ **节省空间**：客户端不需要保存完整的版本历史

### 缺点

❌ **单点故障**：中央服务器故障会导致整个团队无法工作  
❌ **网络依赖**：需要网络连接才能提交代码  
❌ **性能瓶颈**：所有操作都需要与服务器通信，速度较慢  
❌ **数据风险**：如果中央服务器数据丢失且没有备份，项目历史将永久丢失  
❌ **离线工作受限**：无法在离线状态下查看历史或提交代码

## 分布式版本控制系统（DVCS）

### 什么是分布式版本控制

分布式版本控制系统（Distributed Version Control Systems，简称 DVCS）中，每个开发者的本地仓库都包含完整的版本历史。

### 典型代表

- **Git**
- **Mercurial**
- **Bazaar**

### 工作原理

```
远程仓库（中心仓库，用于协作）
    ↕     ↕     ↕
本地仓库A 本地仓库B 本地仓库C
（完整历史）（完整历史）（完整历史）
```

1. 开发者克隆（clone）远程仓库到本地
2. 本地拥有完整的版本历史
3. 在本地提交（commit）代码变更
4. 推送（push）到远程仓库或拉取（pull）其他人的更新
5. 可以在完全离线的情况下工作

### 优点

✅ **完整备份**：每个客户端都是完整的仓库备份  
✅ **快速操作**：大部分操作在本地进行，速度极快  
✅ **离线工作**：可以在没有网络的情况下提交代码、查看历史  
✅ **灵活的工作流**：支持多种协作模式  
✅ **强大的分支**：分支创建和合并非常高效  
✅ **数据完整性**：使用SHA-1哈希保证数据完整性

### 缺点

❌ **学习曲线**：概念较复杂，初学者需要时间适应  
❌ **存储空间**：本地需要保存完整历史，占用更多空间  
❌ **权限控制**：较难实现细粒度的权限控制（但可以通过服务器端钩子实现）

## 两种模式的对比

| 特性 | 集中式（SVN） | 分布式（Git） |
|------|--------------|--------------|
| 版本库位置 | 仅在中央服务器 | 每个客户端都有完整版本库 |
| 网络依赖 | 强依赖，大部分操作需要网络 | 弱依赖，仅同步时需要网络 |
| 操作速度 | 较慢，需要服务器通信 | 快速，大部分操作在本地 |
| 离线工作 | 基本不支持 | 完全支持 |
| 分支操作 | 较慢，创建分支成本高 | 快速，分支操作成本低 |
| 数据安全 | 依赖中央服务器和备份 | 每个克隆都是完整备份 |
| 学习难度 | 简单 | 相对复杂 |
| 权限控制 | 细粒度控制容易 | 需要额外配置 |
| 存储空间 | 客户端占用小 | 客户端占用较大 |

## 为什么选择Git

Git作为目前最流行的分布式版本控制系统，具有以下优势：

### 1. 强大的社区支持
- GitHub、GitLab、Bitbucket等平台的广泛使用
- 丰富的第三方工具和插件生态

### 2. 卓越的性能
- 本地操作速度快
- 高效的数据存储机制

### 3. 灵活的工作流
- 支持Git Flow、GitHub Flow等多种工作流模式
- 适应各种团队规模和项目类型

### 4. 强大的分支管理
- 分支创建和切换几乎瞬间完成
- 合并功能强大，冲突解决机制完善

### 5. 数据完整性保证
- 使用SHA-1哈希确保数据不被篡改
- 几乎所有操作都是添加数据

### 6. 开源免费
- 完全开源，社区活跃
- 持续更新和改进

## 总结

- **集中式版本控制**适合小型团队、简单项目或需要严格权限控制的场景
- **分布式版本控制**特别是Git，更适合现代软件开发的需求
- Git已经成为行业标准，掌握Git是现代开发者的必备技能
- 理解两种模式的差异有助于更好地使用Git

## 下一步

在理解了版本控制系统的基本概念后，下一节我们将学习如何搭建Git客户端环境。

---

[返回目录](../../README.md) | [下一节：Git客户端环境搭建 →](02-git-client-setup.md)
